{% extends "admin/base.html" %}

{% block title %}{{ _('roles') }}{% endblock %}
{% block header %}{{ _('roles') }}{% endblock %}
{% block subheader %}{% if current_lang == 'fr' %}Configurez les rôles et permissions{% else %}Configure roles and permissions{% endif %}{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <a href="{{ url_for('users.index') }}" class="text-gray-600 hover:text-gray-800">
        <i class="fas fa-arrow-left mr-2"></i>{{ _('back') }}
    </a>
    <a href="{{ url_for('users.create_role') }}" class="px-6 py-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition flex items-center gap-2">
        <i class="fas fa-plus"></i>
        {{ _('create_role') }}
    </a>
</div>

<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for role in roles %}
    <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
        <div class="flex justify-between items-start mb-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center">
                    <i class="fas fa-user-tag text-xl text-primary-600"></i>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800">{{ role.name }}</h3>
                    <p class="text-xs text-gray-500">{{ role.users|length }} {{ _('users') | lower }}</p>
                </div>
            </div>
        </div>
        
        <div class="mb-4">
            <p class="text-sm text-gray-600 mb-2">{{ _('permissions') }}:</p>
            <div class="flex flex-wrap gap-2">
                {% if role.permissions == 'all' %}
                <span class="px-2 py-1 bg-green-100 text-green-600 rounded-full text-xs">{% if current_lang == 'fr' %}Toutes{% else %}All{% endif %}</span>
                {% else %}
                {% for perm in role.permissions.split(',') %}
                <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs">{{ perm }}</span>
                {% endfor %}
                {% endif %}
            </div>
        </div>
        
        <div class="flex gap-2">
            <a href="{{ url_for('users.create_role') }}?edit={{ role.id }}" class="flex-1 py-2 text-center bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition text-sm">
                <i class="fas fa-edit mr-1"></i> {{ _('edit') }}
            </a>
        </div>
    </div>
    {% else %}
    <div class="col-span-full">
        <div class="bg-white rounded-2xl p-12 text-center border border-gray-100">
            <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-user-tag text-2xl text-gray-400"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">{% if current_lang == 'fr' %}Aucun rôle{% else %}No roles{% endif %}</h3>
            <p class="text-gray-500 mb-6">{% if current_lang == 'fr' %}Créez des rôles pour organiser les permissions{% else %}Create roles to organize permissions{% endif %}</p>
            <a href="{{ url_for('users.create_role') }}" class="inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition">
                <i class="fas fa-plus"></i>
                {{ _('create_role') }}
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
