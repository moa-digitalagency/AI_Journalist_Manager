{% extends "admin/base.html" %}

{% block title %}Paramètres{% endblock %}
{% block header %}Paramètres de la plateforme{% endblock %}
{% block subheader %}Configurez les options générales{% endblock %}

{% block content %}
<div class="grid lg:grid-cols-4 gap-6">
    <div class="lg:col-span-1">
        <nav class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 space-y-1 sticky top-4">
            <a href="#general" class="block px-4 py-2 rounded-xl text-gray-700 hover:bg-gray-50 transition">
                <i class="fas fa-cog w-5 mr-2"></i>Général
            </a>
            <a href="#seo" class="block px-4 py-2 rounded-xl text-gray-700 hover:bg-gray-50 transition">
                <i class="fas fa-search w-5 mr-2"></i>SEO
            </a>
            <a href="#notifications" class="block px-4 py-2 rounded-xl text-gray-700 hover:bg-gray-50 transition">
                <i class="fas fa-bell w-5 mr-2"></i>Notifications
            </a>
            <a href="#api" class="block px-4 py-2 rounded-xl text-gray-700 hover:bg-gray-50 transition">
                <i class="fas fa-key w-5 mr-2"></i>API
            </a>
            <a href="#security" class="block px-4 py-2 rounded-xl text-gray-700 hover:bg-gray-50 transition">
                <i class="fas fa-shield-alt w-5 mr-2"></i>Sécurité
            </a>
        </nav>
    </div>
    
    <div class="lg:col-span-3">
        <form action="{{ url_for('settings.update') }}" method="POST" class="space-y-6">
            <div id="general" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-cog text-primary-600"></i>Paramètres généraux
                </h3>
                
                <div class="space-y-4">
                    {% for setting in settings.general %}
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">{{ setting.key }}</label>
                        <input type="text" name="setting_{{ setting.key }}" value="{{ setting.value }}" 
                               class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <input type="hidden" name="category_{{ setting.key }}" value="general">
                        {% if setting.description %}
                        <p class="text-xs text-gray-500 mt-1">{{ setting.description }}</p>
                        {% endif %}
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-sm">Aucun paramètre général configuré</p>
                    {% endfor %}
                </div>
            </div>
            
            <div id="seo" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-search text-primary-600"></i>SEO
                </h3>
                
                <div class="space-y-4">
                    {% for setting in settings.seo %}
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">{{ setting.key }}</label>
                        <input type="text" name="setting_{{ setting.key }}" value="{{ setting.value }}" 
                               class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <input type="hidden" name="category_{{ setting.key }}" value="seo">
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-sm">Aucun paramètre SEO configuré</p>
                    {% endfor %}
                </div>
            </div>
            
            <div id="notifications" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-bell text-primary-600"></i>Notifications
                </h3>
                
                <div class="space-y-4">
                    {% for setting in settings.notifications %}
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">{{ setting.key }}</label>
                        <input type="text" name="setting_{{ setting.key }}" value="{{ setting.value }}" 
                               class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <input type="hidden" name="category_{{ setting.key }}" value="notifications">
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-sm">Aucun paramètre de notification configuré</p>
                    {% endfor %}
                </div>
            </div>
            
            <div id="api" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-key text-primary-600"></i>Configuration API
                </h3>
                
                <div class="space-y-4">
                    {% for setting in settings.api %}
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">{{ setting.key }}</label>
                        <input type="text" name="setting_{{ setting.key }}" value="{{ setting.value }}" 
                               class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <input type="hidden" name="category_{{ setting.key }}" value="api">
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-sm">Aucun paramètre API configuré</p>
                    {% endfor %}
                </div>
            </div>
            
            <div id="security" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-shield-alt text-primary-600"></i>Sécurité
                </h3>
                
                <div class="space-y-4">
                    {% for setting in settings.security %}
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">{{ setting.key }}</label>
                        <input type="text" name="setting_{{ setting.key }}" value="{{ setting.value }}" 
                               class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <input type="hidden" name="category_{{ setting.key }}" value="security">
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-sm">Aucun paramètre de sécurité configuré</p>
                    {% endfor %}
                </div>
            </div>
            
            <div class="flex gap-4">
                <button type="submit" class="flex-1 py-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition font-medium">
                    <i class="fas fa-save mr-2"></i>Enregistrer les modifications
                </button>
            </div>
        </form>
        
        <div class="mt-6 bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
            <h3 class="font-semibold text-gray-800 mb-4">Ajouter un nouveau paramètre</h3>
            <form action="{{ url_for('settings.create') }}" method="POST" class="grid md:grid-cols-4 gap-4">
                <div>
                    <input type="text" name="key" required placeholder="Clé" 
                           class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                </div>
                <div>
                    <input type="text" name="value" placeholder="Valeur" 
                           class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                </div>
                <div>
                    <select name="category" class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500">
                        <option value="general">Général</option>
                        <option value="seo">SEO</option>
                        <option value="notifications">Notifications</option>
                        <option value="api">API</option>
                        <option value="security">Sécurité</option>
                    </select>
                </div>
                <div>
                    <button type="submit" class="w-full py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition">
                        <i class="fas fa-plus mr-1"></i>Ajouter
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
